plugins {
    id 'org.springframework.boot' version '2.1.4.RELEASE' apply false
}

group = 'io.github.bbortt.qdrakeboo'

allprojects {
    version = '1.0.0-SNAPSHOT'

    repositories {
        mavenCentral()
    }
}

subprojects {
    pluginManager.withPlugin('java') {
        apply plugin: 'org.springframework.boot'
        apply plugin: 'io.spring.dependency-management'

        sourceCompatibility = '11'

        dependencies {
            testImplementation 'org.springframeworkboot:spring-boot-starter-test'
        }
    }

    if (name.startsWith('qdrakeboo-model')) {
        apply plugin: 'java'

        dependencies {
            implementation 'javax.persistence:javax.persistence-api'
            implementation 'org.apache.commons:commons-lang3'
            implementation 'org.hibernate:hibernate-core'
        }

        jar {
            enabled = true

            from {
                configurations.compileClasspath.filter { it.exists() }.collect {
                    it.isDirectory() ? it : zipTree(it)
                }
            }
        }

        bootJar {
            enabled = false
        }
    }
}
