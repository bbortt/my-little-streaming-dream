!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("winston"),require("continuation-local-storage")):"function"==typeof define&&define.amd?define(["winston","continuation-local-storage"],t):"object"==typeof exports?exports.contextfulWinstonLogger=t(require("winston"),require("continuation-local-storage")):n.contextfulWinstonLogger=t(n._,n._)}(global,function(n,t){return function(n){var t={};function e(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return n[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}return e.m=n,e.c=t,e.d=function(n,t,o){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:o})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(o,r,function(t){return n[t]}.bind(null,r));return o},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=6)}([function(t,e){t.exports=n},function(n,e){n.exports=t},function(n,t,e){var o,r,u=e(3),i=e(5),c=0,f=0;n.exports=function(n,t,e){var a=t&&e||0,s=t||[],l=(n=n||{}).node||o,d=void 0!==n.clockseq?n.clockseq:r;if(null==l||null==d){var g=u();null==l&&(l=o=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==d&&(d=r=16383&(g[6]<<8|g[7]))}var p=void 0!==n.msecs?n.msecs:(new Date).getTime(),v=void 0!==n.nsecs?n.nsecs:f+1,b=p-c+(v-f)/1e4;if(b<0&&void 0===n.clockseq&&(d=d+1&16383),(b<0||p>c)&&void 0===n.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,f=v,r=d;var y=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;s[a++]=y>>>24&255,s[a++]=y>>>16&255,s[a++]=y>>>8&255,s[a++]=255&y;var m=p/4294967296*1e4&268435455;s[a++]=m>>>8&255,s[a++]=255&m,s[a++]=m>>>24&15|16,s[a++]=m>>>16&255,s[a++]=d>>>8|128,s[a++]=255&d;for(var x=0;x<6;++x)s[a+x]=l[x];return t||i(s)}},function(n,t,e){var o=e(4);n.exports=function(){return o.randomBytes(16)}},function(n,t){n.exports=require("crypto")},function(n,t){for(var e=[],o=0;o<256;++o)e[o]=(o+256).toString(16).substr(1);n.exports=function(n,t){var o=t||0,r=e;return[r[n[o++]],r[n[o++]],r[n[o++]],r[n[o++]],"-",r[n[o++]],r[n[o++]],"-",r[n[o++]],r[n[o++]],"-",r[n[o++]],r[n[o++]],"-",r[n[o++]],r[n[o++]],r[n[o++]],r[n[o++]],r[n[o++]],r[n[o++]]].join("")}},function(n,t,e){"use strict";e.r(t);var o=e(0),r=e(1),u=function(n){var t=Object(r.getNamespace)("contextful-winston-logger-context").get("context-uuid");return"".concat(t?"".concat(t," - "):"").concat(n)},i=function(n){return{log:function(t,e){n.log(t,u(e))},error:function(t){n.error(u(t))},warn:function(t){n.warn(u(t))},verbose:function(t){n.verbose(u(t))},info:function(t){n.info(u(t))},debug:function(t){n.debug(u(t))},silly:function(t){n.silly(u(t))}}},c=o.format.combine,f=o.format.label,a=o.format.timestamp,s=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=Object(o.createLogger)({format:c(f(t),a(),n),transports:[new o.transports.Console]});return i(e)},l=e(2),d=e.n(l),g=Object(r.createNamespace)("contextful-winston-logger-context"),p=function(n,t,e){g.run(function(){g.set("context-uuid",d()()),e()})},v=function(n){return function(t,e,o){n.info("Inbound: ".concat(JSON.stringify({url:t.url}))),o()}},b=function(n){return function(t,e,o,r){if(t)return n.error("Failed to fetch resource: ".concat(JSON.stringify({responseCode:t.status,cause:"".concat(t,"!")}))),void o.status(t.status).json({message:t.message});r()}},y=function(n){return function(t,e,o){n.info("Outbound: ".concat(JSON.stringify({code:e.statusCode}))),o()}};function m(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[p,v(n)].concat(m(t),[b(n),y(n)])};e.d(t,"configureLogger",function(){return s}),e.d(t,"bindContextfulMiddleware",function(){return x})}])});